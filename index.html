<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ModuleJs</title>
	<link rel="stylesheet" type="text/css" href="./src/mce.css"/>
</head>
<body>
	<div id="app" class="router-view">
		<div class="router-page">
			<a href="javascript:;" onclick="linkTo('home/Home')">首页</a>
			<a href="javascript:;" onclick="linkTo('category/Category')">分类</a>
			<a href="javascript:;" onclick="linkTo('about/Abou')">关于</a>
		</div>
	</div>
	<script type="text/javascript" src="./src/mce.js"></script>
	<script type="text/javascript">
		mce.use(['router','view','tpl'],function () {
			var router = this.router
			  , printf = this.toolFn.printf;
			this.view.config({
				animation: "slide",
				pageCurrent: ".page-current",
				routerPage: ".router-page",
				routeView: "mce-route-view"
			});
			router.createView(this.view).route("found",function () {
				document.querySelector("#content").innerHTML = "404 found";
			}).redirectFound("/found").before(function (to,next) {
				console.log("路由回调执行前");
				console.log(this.historyState);
				next();
			}).after(function () {
				console.log("路由回调执行完毕");
			}).dispatch([
				{
					path: "/",
					callback: function () {
						return view({
							template: printf("<h1>{0}</h1>",this.params.name || "Hello")
						});
					}
				},
				{
					path: "home/:name",
					callback: function () {
						return view({
							template: printf("<h1>{0}</h1>",this.params.name)
						});
					}
				},
				{
					path: "category/:name",
					callback: function () {
						return view({
							template: printf("<h1>{0}</h1>",this.params.name)
						});
					}
				},
				{
					path: "about/:name",
					callback: function () {
						return view({
							template: printf("<h1>{0}</h1>",this.params.name)
						});
					}
				}
			]);
		});
	</script>
</body>
</html>