<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ModuleJs</title>
</head>
<body>
	<div id="app">
		<a href="javascript:;" onclick="linkTo('home?name=Home')">首页</a>
		<a href="javascript:;" onclick="linkTo('category?name=Category')">分类</a>
		<a href="javascript:;" onclick="linkTo('about?name=Abou')">关于</a>

		<div id="router-view" style="margin-top:50px;">
			<div class=""></div>
		</div>
	</div>
	<script type="text/javascript" src="./src/mce.js"></script>
	<script type="text/javascript">
		mce.use(['router','view','tpl'],function () {
			var router = this.router
			  , printf = this.toolFn.printf;
			this.view.config({
				el: "#app"
			});
			router.createView(this.view).route("found",function () {
				document.querySelector("#router-view").innerHTML = "404 found";
			}).redirectFound("/found").before(function (to,next) {
				console.log("路由回调执行前");
				console.log(this.historyState);
				next();
			}).after(function () {
				console.log("路由回调执行完毕");
			}).dispatch([
				{
					path: "/",
					callback: function () {
						return view({
							template: printf("<h1>{0}</h1>>",this.query.name)
						});
					}
				},
				{
					path: "home",
					callback: function () {
						document.querySelector("#router-view").innerHTML = this.query.name;
					}
				},
				{
					path: "category",
					callback: function () {
						document.querySelector("#router-view").innerHTML = this.query.name;
					}
				},
				{
					path: "about",
					callback: function () {
						document.querySelector("#router-view").innerHTML = this.query.name;
					}
				}
			]);
		});
	</script>
</body>
</html>